<Page
    x:Class="随机抽取学号.Views.ClassPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:animations="using:CommunityToolkit.WinUI.Animations"
    xmlns:classes="using:随机抽取学号.Classes"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    Loaded="Page_Loaded"
    NavigationCacheMode="Enabled"
    mc:Ignorable="d">
    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="ms-appx:///CommunityToolkit.WinUI.Controls.Segmented/Segmented/Segmented.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Style x:Key="PanelStyle" TargetType="StackPanel">
                <Setter Property="Padding" Value="10" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
                <Setter Property="Orientation" Value="Horizontal" />
                <Setter Property="Spacing" Value="8" />
                <Setter Property="animations:Implicit.HideAnimations" Value="{StaticResource ShowTransitions}" />
            </Style>
            <animations:ImplicitAnimationSet x:Name="ShowTransitions">
                <animations:OffsetAnimation
                    EasingMode="EaseOut"
                    From="0,24,0"
                    To="0"
                    Duration="0:0:0.4" />
                <animations:OpacityAnimation
                    EasingMode="EaseOut"
                    From="0"
                    To="1"
                    Duration="0:0:0.2" />
            </animations:ImplicitAnimationSet>
            <animations:ImplicitAnimationSet x:Name="HideTransitions">
                <animations:OffsetAnimation
                    EasingMode="EaseOut"
                    From="0"
                    To="0,24,0"
                    Duration="0:0:0.2" />
                <animations:OpacityAnimation
                    EasingMode="EaseOut"
                    From="1"
                    To="0"
                    Duration="0:0:0.1" />
            </animations:ImplicitAnimationSet>

            <DataTemplate x:Key="StudentListTemplate" x:DataType="classes:Student">
                <Grid Height="120">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <StackPanel
                        Grid.Column="0"
                        MinWidth="50"
                        Margin="10,0,0,0"
                        VerticalAlignment="Center"
                        BorderBrush="LightBlue"
                        BorderThickness="2"
                        CornerRadius="4"
                        Orientation="Vertical">
                        <StackPanel.Background>
                            <SolidColorBrush Opacity="0.1" Color="LightBlue" />
                        </StackPanel.Background>
                        <TextBlock
                            HorizontalAlignment="Center"
                            FontFamily="{StaticResource HarmonyOSSans}"
                            FontSize="14"
                            Text="学号" />
                        <TextBlock
                            x:Name="IdTextBlock"
                            HorizontalAlignment="Center"
                            FontFamily="{StaticResource HarmonyOSSans}"
                            FontSize="20"
                            Text="{x:Bind StudentNumber, Mode=OneWay}"
                            TextAlignment="Center" />
                    </StackPanel>
                    <Border
                        Grid.Column="1"
                        Height="100"
                        Margin="40,0,0,0"
                        Background="Transparent"
                        CornerRadius="4">
                        <Image
                            x:Name="StudentPhoto"
                            Width="75"
                            Height="100"
                            Source="{x:Bind PhotoPath, Mode=OneWay}"
                            Stretch="UniformToFill" />
                    </Border>
                    <StackPanel
                        Grid.Column="2"
                        Margin="12,0,0,0"
                        Orientation="Vertical">

                        <StackPanel
                            Margin="0,22,0,0"
                            VerticalAlignment="Center"
                            Orientation="Vertical">
                            <TextBlock
                                VerticalAlignment="Center"
                                FontFamily="{StaticResource HarmonyOSSans}"
                                FontSize="16"
                                Text="姓名:" />
                            <TextBox
                                x:Name="NameTextBlock"
                                Width="Auto"
                                Margin="0,0,20,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center"
                                FontFamily="{StaticResource HarmonyOSSans}"
                                FontSize="24"
                                Text="{x:Bind Name, Mode=TwoWay}" />
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </DataTemplate>
            <Style x:Key="EditorStyle" TargetType="TextBox">
                <Setter Property="Foreground" Value="{ThemeResource TextControlForeground}" />
                <Setter Property="Background" Value="{ThemeResource TextControlBackground}" />
                <Setter Property="BorderBrush" Value="{ThemeResource TextControlBorderBrush}" />
                <Setter Property="SelectionHighlightColor" Value="{ThemeResource TextControlSelectionHighlightColor}" />
                <Setter Property="BorderThickness" Value="{ThemeResource TextControlBorderThemeThickness}" />
                <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}" />
                <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}" />
                <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Auto" />
                <Setter Property="ScrollViewer.VerticalScrollMode" Value="Auto" />
                <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Hidden" />
                <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Hidden" />
                <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="False" />
                <Setter Property="Padding" Value="{ThemeResource TextControlThemePadding}" />
                <Setter Property="UseSystemFocusVisuals" Value="{ThemeResource IsApplicationFocusVisualKindReveal}" />
                <Setter Property="ContextFlyout" Value="{StaticResource TextControlCommandBarContextFlyout}" />
                <Setter Property="SelectionFlyout" Value="{StaticResource TextControlCommandBarSelectionFlyout}" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="TextBox">
                            <Grid>
                                <Grid.Resources>
                                    <Style x:Name="DeleteButtonStyle" TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Grid
                                                        x:Name="ButtonLayoutGrid"
                                                        Background="{ThemeResource TextControlButtonBackground}"
                                                        BorderBrush="{ThemeResource TextControlButtonBorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}">
                                                        <TextBlock
                                                            x:Name="GlyphElement"
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            AutomationProperties.AccessibilityView="Raw"
                                                            FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                            FontSize="12"
                                                            FontStyle="Normal"
                                                            Foreground="{ThemeResource TextControlButtonForeground}"
                                                            Text="&#xE10A;" />
                                                        <VisualStateManager.VisualStateGroups>
                                                            <VisualStateGroup x:Name="CommonStates">
                                                                <VisualState x:Name="Normal" />
                                                                <VisualState x:Name="PointerOver">
                                                                    <Storyboard>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonLayoutGrid" Storyboard.TargetProperty="Background">
                                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlButtonBackgroundPointerOver}" />
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonLayoutGrid" Storyboard.TargetProperty="BorderBrush">
                                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlButtonBorderBrushPointerOver}" />
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="GlyphElement" Storyboard.TargetProperty="Foreground">
                                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlButtonForegroundPointerOver}" />
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                                <VisualState x:Name="Pressed">
                                                                    <Storyboard>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonLayoutGrid" Storyboard.TargetProperty="Background">
                                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlButtonBackgroundPressed}" />
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonLayoutGrid" Storyboard.TargetProperty="BorderBrush">
                                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlButtonBorderBrushPressed}" />
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="GlyphElement" Storyboard.TargetProperty="Foreground">
                                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlButtonForegroundPressed}" />
                                                                        </ObjectAnimationUsingKeyFrames>
                                                                    </Storyboard>
                                                                </VisualState>
                                                                <VisualState x:Name="Disabled">
                                                                    <Storyboard>
                                                                        <DoubleAnimation
                                                                            Storyboard.TargetName="ButtonLayoutGrid"
                                                                            Storyboard.TargetProperty="Opacity"
                                                                            To="0"
                                                                            Duration="0" />
                                                                    </Storyboard>
                                                                </VisualState>
                                                            </VisualStateGroup>
                                                        </VisualStateManager.VisualStateGroups>
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Grid.Resources>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <ContentPresenter
                                    x:Name="HeaderContentPresenter"
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    Margin="{ThemeResource TextBoxTopHeaderMargin}"
                                    VerticalAlignment="Top"
                                    x:DeferLoadStrategy="Lazy"
                                    Content="{TemplateBinding Header}"
                                    ContentTemplate="{TemplateBinding HeaderTemplate}"
                                    FontWeight="Normal"
                                    Foreground="{ThemeResource TextControlHeaderForeground}"
                                    TextWrapping="Wrap"
                                    Visibility="Collapsed" />
                                <Border
                                    x:Name="BorderElement"
                                    Grid.Row="1"
                                    Grid.RowSpan="1"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    MinWidth="{ThemeResource TextControlThemeMinWidth}"
                                    MinHeight="{ThemeResource TextControlThemeMinHeight}"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    Control.IsTemplateFocusTarget="True"
                                    CornerRadius="{TemplateBinding CornerRadius}" />
                                <ScrollViewer
                                    x:Name="ContentElement"
                                    Grid.Row="1"
                                    Grid.Column="0"
                                    Margin="{TemplateBinding BorderThickness}"
                                    Padding="{TemplateBinding Padding}"
                                    AutomationProperties.AccessibilityView="Raw"
                                    HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}"
                                    HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}"
                                    IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}"
                                    IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}"
                                    IsTabStop="False"
                                    IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}"
                                    VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}"
                                    VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}"
                                    ZoomMode="Disabled" />
                                <TextBlock
                                    x:Name="PlaceholderTextContentPresenter"
                                    Grid.Row="1"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    Margin="{TemplateBinding BorderThickness}"
                                    Padding="{TemplateBinding Padding}"
                                    Foreground="{Binding PlaceholderForeground, RelativeSource={RelativeSource Mode=TemplatedParent}, TargetNullValue={ThemeResource TextControlPlaceholderForeground}}"
                                    IsHitTestVisible="False"
                                    Text="{TemplateBinding PlaceholderText}"
                                    TextAlignment="{TemplateBinding TextAlignment}"
                                    TextWrapping="{TemplateBinding TextWrapping}" />
                                <Button
                                    x:Name="DeleteButton"
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    MinWidth="34"
                                    Margin="{ThemeResource HelperButtonThemePadding}"
                                    VerticalAlignment="Stretch"
                                    AutomationProperties.AccessibilityView="Raw"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    FontSize="{TemplateBinding FontSize}"
                                    IsTabStop="False"
                                    Style="{StaticResource DeleteButtonStyle}"
                                    Visibility="Collapsed" />
                                <ContentPresenter
                                    x:Name="DescriptionPresenter"
                                    Grid.Row="2"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    x:Load="False"
                                    AutomationProperties.AccessibilityView="Raw"
                                    Content="{TemplateBinding Description}"
                                    Foreground="{ThemeResource SystemControlDescriptionTextForegroundBrush}" />
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="Normal" />
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HeaderContentPresenter" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlHeaderForegroundDisabled}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderElement" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlBackgroundDisabled}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderElement" Storyboard.TargetProperty="BorderBrush">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlBorderBrushDisabled}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentElement" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlForegroundDisabled}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PlaceholderTextContentPresenter" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{Binding PlaceholderForeground, RelativeSource={RelativeSource Mode=TemplatedParent}, TargetNullValue={ThemeResource TextControlPlaceholderForegroundDisabled}}" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="PointerOver">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderElement" Storyboard.TargetProperty="BorderBrush">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlBorderBrushPointerOver}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderElement" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlBackgroundPointerOver}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PlaceholderTextContentPresenter" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{Binding PlaceholderForeground, RelativeSource={RelativeSource Mode=TemplatedParent}, TargetNullValue={ThemeResource TextControlPlaceholderForegroundPointerOver}}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentElement" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlForegroundPointerOver}" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Focused">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PlaceholderTextContentPresenter" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{Binding PlaceholderForeground, RelativeSource={RelativeSource Mode=TemplatedParent}, TargetNullValue={ThemeResource TextControlPlaceholderForegroundFocused}}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderElement" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlBackgroundFocused}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderElement" Storyboard.TargetProperty="BorderBrush">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlBorderBrushFocused}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentElement" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlForegroundFocused}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentElement" Storyboard.TargetProperty="RequestedTheme">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Light" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                    <VisualStateGroup x:Name="ButtonStates">
                                        <VisualState x:Name="ButtonVisible">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="DeleteButton" Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0">
                                                        <DiscreteObjectKeyFrame.Value>
                                                            <Visibility>Visible</Visibility>
                                                        </DiscreteObjectKeyFrame.Value>
                                                    </DiscreteObjectKeyFrame>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="ButtonCollapsed" />
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <!--  折叠状态模板  -->
            <DataTemplate x:Key="CollapsedTemplate" x:DataType="classes:Student">
                <Grid Height="60" Background="Transparent">
                    <TextBlock VerticalAlignment="Center" Text="{x:Bind Name}" />
                </Grid>
            </DataTemplate>

            <!--  展开状态模板  -->
            <DataTemplate x:Key="ExpandedTemplate" x:DataType="classes:Student">
                <Grid Height="120" Background="#FFE1F5FE">
                    <StackPanel>
                        <TextBlock FontSize="18" Text="{x:Bind Name}" />
                        <TextBlock Margin="0,10,0,0" Text="详细信息..." />
                        <Button Margin="0,10" Content="操作按钮" />
                    </StackPanel>
                </Grid>
            </DataTemplate>
            <Style x:Key="StudentListViewItemExpanded" TargetType="ListViewItem">
                <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}" />
                <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}" />
                <Setter Property="BorderBrush" Value="{x:Null}" />
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="Background" Value="Transparent" />
                <Setter Property="Foreground" Value="{ThemeResource SystemControlForegroundBaseHighBrush}" />
                <Setter Property="TabNavigation" Value="Local" />
                <Setter Property="IsHoldingEnabled" Value="True" />
                <Setter Property="Padding" Value="12,0,12,0" />
                <Setter Property="HorizontalContentAlignment" Value="Left" />
                <Setter Property="VerticalContentAlignment" Value="Center" />
                <Setter Property="MinWidth" Value="{ThemeResource ListViewItemMinWidth}" />
                <Setter Property="MinHeight" Value="{ThemeResource ListViewItemMinHeight}" />
                <Setter Property="AllowDrop" Value="False" />
                <Setter Property="UseSystemFocusVisuals" Value="{StaticResource UseSystemFocusVisuals}" />
                <Setter Property="FocusVisualMargin" Value="0" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ListViewItem">
                            <Grid
                                x:Name="ContentBorder"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Control.IsTemplateFocusTarget="True"
                                CornerRadius="{TemplateBinding CornerRadius}"
                                FocusVisualMargin="{TemplateBinding FocusVisualMargin}"
                                RenderTransformOrigin="0.5,0.5">
                                <Grid.RenderTransform>
                                    <ScaleTransform x:Name="ContentBorderScale" />
                                </Grid.RenderTransform>
                                <Rectangle
                                    x:Name="BorderBackground"
                                    Control.IsTemplateFocusTarget="True"
                                    Fill="{ThemeResource SystemControlHighlightListAccentLowBrush}"
                                    IsHitTestVisible="False"
                                    Opacity="0" />
                                <Grid
                                    x:Name="ContentPresenterGrid"
                                    Margin="0,0,0,0"
                                    Background="Transparent">
                                    <Grid.RenderTransform>
                                        <TranslateTransform x:Name="ContentPresenterTranslateTransform" />
                                    </Grid.RenderTransform>
                                    <ContentPresenter
                                        x:Name="ContentPresenter"
                                        Margin="{TemplateBinding Padding}"
                                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                        Content="{TemplateBinding Content}"
                                        ContentTemplate="{TemplateBinding ContentTemplate}"
                                        ContentTransitions="{TemplateBinding ContentTransitions}" />

                                </Grid>
                                <!--
                                    The 'Xg' text simulates the amount of space one line of text will occupy.
                                    In the DataPlaceholder state, the Content is not loaded yet so we
                                    approximate the size of the item using placeholder text.
                                -->
                                <TextBlock
                                    x:Name="PlaceholderTextBlock"
                                    Margin="{TemplateBinding Padding}"
                                    AutomationProperties.AccessibilityView="Raw"
                                    Foreground="{x:Null}"
                                    IsHitTestVisible="False"
                                    Opacity="0"
                                    Text="Xg" />
                                <Rectangle
                                    x:Name="PlaceholderRect"
                                    Fill="{ThemeResource ListViewItemPlaceholderBackground}"
                                    Visibility="Collapsed" />
                                <Border
                                    x:Name="MultiSelectSquare"
                                    Width="20"
                                    Height="20"
                                    Margin="12,0,0,0"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    BorderBrush="{ThemeResource SystemControlForegroundBaseMediumHighBrush}"
                                    BorderThickness="2"
                                    Visibility="Collapsed">
                                    <Border.Clip>
                                        <RectangleGeometry Rect="0,0,20,20">
                                            <RectangleGeometry.Transform>
                                                <TranslateTransform x:Name="MultiSelectClipTransform" />
                                            </RectangleGeometry.Transform>
                                        </RectangleGeometry>
                                    </Border.Clip>
                                    <Border.RenderTransform>
                                        <TranslateTransform x:Name="MultiSelectCheckBoxTransform" />
                                    </Border.RenderTransform>
                                    <FontIcon
                                        x:Name="MultiSelectCheck"
                                        FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                        FontSize="16"
                                        Foreground="{ThemeResource SystemControlForegroundBaseMediumHighBrush}"
                                        Glyph="&#xE73E;"
                                        Opacity="0"
                                        Visibility="Collapsed" />
                                </Border>
                                <Border
                                    x:Name="MultiArrangeOverlayTextBorder"
                                    Height="20"
                                    MinWidth="20"
                                    Margin="12,0,0,0"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    Background="{ThemeResource SystemControlBackgroundAccentBrush}"
                                    BorderBrush="{ThemeResource SystemControlBackgroundChromeWhiteBrush}"
                                    BorderThickness="2"
                                    IsHitTestVisible="False"
                                    Opacity="0">
                                    <TextBlock
                                        x:Name="MultiArrangeOverlayText"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        AutomationProperties.AccessibilityView="Raw"
                                        IsHitTestVisible="False"
                                        Opacity="0"
                                        Style="{ThemeResource CaptionTextBlockStyle}"
                                        Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.DragItemsCount}" />
                                </Border>

                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="Normal">

                                            <Storyboard>
                                                <PointerUpThemeAnimation Storyboard.TargetName="ContentPresenter" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="PointerOver">

                                            <Storyboard>
                                                <DoubleAnimation
                                                    Storyboard.TargetName="BorderBackground"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="1"
                                                    Duration="0" />
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderBackground" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightListLowBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare" Storyboard.TargetProperty="BorderBrush">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectCheck" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <PointerUpThemeAnimation Storyboard.TargetName="ContentPresenter" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="Pressed">

                                            <Storyboard>
                                                <DoubleAnimation
                                                    Storyboard.TargetName="BorderBackground"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="1"
                                                    Duration="0" />
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderBackground" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightListMediumBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare" Storyboard.TargetProperty="BorderBrush">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectCheck" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <PointerDownThemeAnimation TargetName="ContentPresenter" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="Selected">

                                            <Storyboard>
                                                <DoubleAnimation
                                                    Storyboard.TargetName="MultiSelectCheck"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="1"
                                                    Duration="0:0:0" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="BorderBackground"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="1"
                                                    Duration="0" />
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderBackground" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightListAccentLowBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare" Storyboard.TargetProperty="BorderBrush">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectCheck" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <PointerUpThemeAnimation Storyboard.TargetName="ContentPresenter" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="PointerOverSelected">

                                            <Storyboard>
                                                <DoubleAnimation
                                                    Storyboard.TargetName="MultiSelectCheck"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="1"
                                                    Duration="0:0:0" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="BorderBackground"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="1"
                                                    Duration="0" />
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderBackground" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightListAccentMediumBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare" Storyboard.TargetProperty="BorderBrush">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectCheck" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <PointerUpThemeAnimation Storyboard.TargetName="ContentPresenter" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="PressedSelected">

                                            <Storyboard>
                                                <DoubleAnimation
                                                    Storyboard.TargetName="MultiSelectCheck"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="1"
                                                    Duration="0:0:0" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="BorderBackground"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="1"
                                                    Duration="0" />
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderBackground" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightListAccentHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare" Storyboard.TargetProperty="BorderBrush">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectCheck" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltBaseHighBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <PointerDownThemeAnimation TargetName="ContentPresenter" />
                                            </Storyboard>
                                        </VisualState>

                                    </VisualStateGroup>

                                    <VisualStateGroup x:Name="DisabledStates">
                                        <VisualState x:Name="Enabled" />

                                        <VisualState x:Name="Disabled">

                                            <Storyboard>
                                                <DoubleAnimation
                                                    Storyboard.TargetName="ContentBorder"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="{ThemeResource ListViewItemDisabledThemeOpacity}"
                                                    Duration="0" />
                                            </Storyboard>
                                        </VisualState>

                                    </VisualStateGroup>

                                    <VisualStateGroup x:Name="MultiSelectStates">
                                        <VisualState x:Name="MultiSelectDisabled">

                                            <Storyboard>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectCheckBoxTransform" Storyboard.TargetProperty="X">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0" />
                                                    <SplineDoubleKeyFrame
                                                        KeySpline="0.1,0.9,0.2,1"
                                                        KeyTime="0:0:0.333"
                                                        Value="-32" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectClipTransform" Storyboard.TargetProperty="X">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0" />
                                                    <SplineDoubleKeyFrame
                                                        KeySpline="0.1,0.9,0.2,1"
                                                        KeyTime="0:0:0.333"
                                                        Value="32" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenterTranslateTransform" Storyboard.TargetProperty="X">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="32" />
                                                    <SplineDoubleKeyFrame
                                                        KeySpline="0.1,0.9,0.2,1"
                                                        KeyTime="0:0:0.333"
                                                        Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare" Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0.333" Value="Collapsed" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="MultiSelectEnabled">

                                            <Storyboard>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectCheckBoxTransform" Storyboard.TargetProperty="X">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="-32" />
                                                    <SplineDoubleKeyFrame
                                                        KeySpline="0.1,0.9,0.2,1"
                                                        KeyTime="0:0:0.333"
                                                        Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectClipTransform" Storyboard.TargetProperty="X">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="32" />
                                                    <SplineDoubleKeyFrame
                                                        KeySpline="0.1,0.9,0.2,1"
                                                        KeyTime="0:0:0.333"
                                                        Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenterTranslateTransform" Storyboard.TargetProperty="X">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="-32" />
                                                    <SplineDoubleKeyFrame
                                                        KeySpline="0.1,0.9,0.2,1"
                                                        KeyTime="0:0:0.333"
                                                        Value="0" />
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare" Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectCheck" Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenterGrid" Storyboard.TargetProperty="Margin">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="32,0,0,0" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>

                                    </VisualStateGroup>

                                    <VisualStateGroup x:Name="DataVirtualizationStates">
                                        <VisualState x:Name="DataAvailable" />

                                        <VisualState x:Name="DataPlaceholder">

                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PlaceholderTextBlock" Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PlaceholderRect" Storyboard.TargetProperty="Visibility">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>

                                    </VisualStateGroup>

                                    <VisualStateGroup x:Name="ReorderHintStates">
                                        <VisualState x:Name="NoReorderHint" />

                                        <VisualState x:Name="BottomReorderHint">

                                            <Storyboard>
                                                <DragOverThemeAnimation
                                                    Direction="Bottom"
                                                    ToOffset="{ThemeResource ListViewItemReorderHintThemeOffset}"
                                                    TargetName="ContentBorder" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="TopReorderHint">

                                            <Storyboard>
                                                <DragOverThemeAnimation
                                                    Direction="Top"
                                                    ToOffset="{ThemeResource ListViewItemReorderHintThemeOffset}"
                                                    TargetName="ContentBorder" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="RightReorderHint">

                                            <Storyboard>
                                                <DragOverThemeAnimation
                                                    Direction="Right"
                                                    ToOffset="{ThemeResource ListViewItemReorderHintThemeOffset}"
                                                    TargetName="ContentBorder" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="LeftReorderHint">

                                            <Storyboard>
                                                <DragOverThemeAnimation
                                                    Direction="Left"
                                                    ToOffset="{ThemeResource ListViewItemReorderHintThemeOffset}"
                                                    TargetName="ContentBorder" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualStateGroup.Transitions>
                                            <VisualTransition GeneratedDuration="0:0:0.2" To="NoReorderHint" />
                                        </VisualStateGroup.Transitions>

                                    </VisualStateGroup>

                                    <VisualStateGroup x:Name="DragStates">
                                        <VisualState x:Name="NotDragging" />

                                        <VisualState x:Name="Dragging">

                                            <Storyboard>
                                                <DoubleAnimation
                                                    Storyboard.TargetName="ContentBorder"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="{ThemeResource ListViewItemDragThemeOpacity}"
                                                    Duration="0" />
                                                <DragItemThemeAnimation TargetName="ContentBorder" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="DraggingTarget" />

                                        <VisualState x:Name="MultipleDraggingPrimary">

                                            <Storyboard>
                                                <!--
                                                    These two Opacity animations are required - the FadeInThemeAnimations
                                                    on the same elements animate an internal Opacity.
                                                -->
                                                <DoubleAnimation
                                                    Storyboard.TargetName="MultiArrangeOverlayText"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="1"
                                                    Duration="0" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="MultiArrangeOverlayTextBorder"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="1"
                                                    Duration="0" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="MultiSelectSquare"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="0"
                                                    Duration="0" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="MultiSelectCheck"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="0"
                                                    Duration="0" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="ContentBorder"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="{ThemeResource ListViewItemDragThemeOpacity}"
                                                    Duration="0" />
                                                <FadeInThemeAnimation TargetName="MultiArrangeOverlayText" />
                                                <FadeInThemeAnimation TargetName="MultiArrangeOverlayTextBorder" />
                                                <DragItemThemeAnimation TargetName="ContentBorder" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="MultipleDraggingSecondary" />

                                        <VisualState x:Name="DraggedPlaceholder" />

                                        <VisualState x:Name="Reordering">

                                            <Storyboard>
                                                <DoubleAnimation
                                                    Storyboard.TargetName="ContentBorder"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="{ThemeResource ListViewItemReorderThemeOpacity}"
                                                    Duration="0:0:0.240" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="ReorderingTarget">

                                            <Storyboard>
                                                <DoubleAnimation
                                                    Storyboard.TargetName="ContentBorder"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="{ThemeResource ListViewItemReorderTargetThemeOpacity}"
                                                    Duration="0:0:0.240" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="ContentBorderScale"
                                                    Storyboard.TargetProperty="ScaleX"
                                                    To="{ThemeResource ListViewItemReorderTargetThemeScale}"
                                                    Duration="0:0:0.240" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="ContentBorderScale"
                                                    Storyboard.TargetProperty="ScaleY"
                                                    To="{ThemeResource ListViewItemReorderTargetThemeScale}"
                                                    Duration="0:0:0.240" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="MultipleReorderingPrimary">

                                            <Storyboard>
                                                <!--
                                                    These two Opacity animations are required - the FadeInThemeAnimations
                                                    on the same elements animate an internal Opacity.
                                                -->
                                                <DoubleAnimation
                                                    Storyboard.TargetName="MultiArrangeOverlayText"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="1"
                                                    Duration="0" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="MultiArrangeOverlayTextBorder"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="1"
                                                    Duration="0" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="MultiSelectSquare"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="0"
                                                    Duration="0" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="MultiSelectCheck"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="0"
                                                    Duration="0" />
                                                <DoubleAnimation
                                                    Storyboard.TargetName="ContentBorder"
                                                    Storyboard.TargetProperty="Opacity"
                                                    To="{ThemeResource ListViewItemDragThemeOpacity}"
                                                    Duration="0:0:0.240" />
                                                <FadeInThemeAnimation TargetName="MultiArrangeOverlayText" />
                                                <FadeInThemeAnimation TargetName="MultiArrangeOverlayTextBorder" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="ReorderedPlaceholder">

                                            <Storyboard>
                                                <FadeOutThemeAnimation TargetName="ContentBorder" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualState x:Name="DragOver">

                                            <Storyboard>
                                                <DropTargetItemThemeAnimation TargetName="ContentBorder" />
                                            </Storyboard>
                                        </VisualState>

                                        <VisualStateGroup.Transitions>
                                            <VisualTransition GeneratedDuration="0:0:0.2" To="NotDragging" />
                                        </VisualStateGroup.Transitions>

                                    </VisualStateGroup>

                                </VisualStateManager.VisualStateGroups>
                            </Grid>

                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Storyboard
                x:Key="ExpandStudentListViewItemStorybord"
                x:Name="ExpandStudentListViewItemStorybord"
                Completed="ExpandStudentListViewItemStorybord_Completed">
                <DoubleAnimation
                    Storyboard.TargetProperty="Height"
                    From="60"
                    To="120"
                    Duration="0:0:0.01" />
                <!--<DoubleAnimation
                    BeginTime="0:0:0.1"
                    Storyboard.TargetProperty="Opacity"
                    From="0"
                    To="1"
                    Duration="0:0:0.3" />-->
            </Storyboard>
            <Storyboard
                x:Key="CollapseStudentListViewItemStorybord"
                x:Name="CollapseStudentListViewItemStorybord"
                Completed="CollapseStudentListViewItemStorybord_Completed">
                <DoubleAnimation
                    Storyboard.TargetProperty="Height"
                    From="120"
                    To="60"
                    Duration="0:0:0.01" />
                <!--<DoubleAnimation
                    BeginTime="0:0:0.1"
                    Storyboard.TargetProperty="Opacity"
                    From="1"
                    To="0"
                    Duration="0:0:0.3" />-->
            </Storyboard>
        </ResourceDictionary>


    </Page.Resources>

    <Grid x:Name="ContentGrid">
        <Grid
            Width="Auto"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            CornerRadius="8,8,8,8">
            <Grid.Background>
                <SolidColorBrush Opacity="0.5" Color="White" />
            </Grid.Background>
            <Grid>
                <TextBlock
                    Margin="7,10,0,0"
                    HorizontalAlignment="Left"
                    FontFamily="{StaticResource HarmonyOSSans}"
                    Text="自动保存" />
                <ToggleSwitch
                    x:Name="AutoSaveToggleSwitch"
                    Width="40"
                    Height="30"
                    MinWidth="40"
                    MinHeight="30"
                    Margin="70,0,0,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    FontFamily="{StaticResource HarmonyOSSans}" />
            </Grid>
            <controls:Segmented
                x:Name="FileEditSegmented"
                Margin="115,0,0,0"
                VerticalAlignment="Top"
                SelectionChanged="FileEditSegmented_SelectionChanged"
                Style="{StaticResource PivotSegmentedStyle}">
                <controls:SegmentedItem>
                    <StackPanel Orientation="Horizontal">
                        <SymbolIcon Margin="0,2,0,0" Symbol="Page2">
                            <SymbolIcon.RenderTransform>
                                <ScaleTransform ScaleX="0.8" ScaleY="0.8" />
                            </SymbolIcon.RenderTransform>
                        </SymbolIcon>
                        <TextBlock
                            FontFamily="{StaticResource HarmonyOSSans}"
                            FontSize="15"
                            Text="文件" />
                    </StackPanel>
                </controls:SegmentedItem>
                <controls:SegmentedItem>
                    <StackPanel Orientation="Horizontal">
                        <SymbolIcon Margin="0,2,0,0" Symbol="Edit">
                            <SymbolIcon.RenderTransform>
                                <ScaleTransform ScaleX="0.8" ScaleY="0.8" />
                            </SymbolIcon.RenderTransform>
                        </SymbolIcon>
                        <TextBlock
                            FontFamily="{StaticResource HarmonyOSSans}"
                            FontSize="15"
                            Text="编辑" />
                    </StackPanel>
                </controls:SegmentedItem>
            </controls:Segmented>
        </Grid>

        <Grid MinWidth="400" MinHeight="300">

            <Grid x:Name="PhotosGrid" Margin="0,125,0,0">
                <ListView
                    x:Name="StudentListView"
                    AllowDrop="True"
                    Background="Transparent"
                    CanDragItems="True"
                    CanReorderItems="True"
                    DragItemsCompleted="StudentListView_DragItemsCompleted"
                    DragOver="StudentListView_DragOver"
                    Drop="StudentListView_Drop"
                    ItemTemplate="{StaticResource StudentListTemplate}"
                    ItemsSource="{x:Bind classes:StudentManager.StudentList}"
                    SelectionChanged="StudentListView_SelectionChanged"
                    SelectionMode="Single">
                    <!--<ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ListViewItem">
                                        <ListViewItemPresenter SelectedBackground="Orange" SelectionCheckMarkVisualEnabled="False" />
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ListView.ItemContainerStyle>-->
                    <!--<ListView.Transitions>
                        <TransitionCollection>
                            <EntranceThemeTransition FromVerticalOffset="500" IsStaggeringEnabled="True" />
                        </TransitionCollection>
                    </ListView.Transitions>-->
                    <ListView.ItemContainerTransitions>
                        <TransitionCollection>
                            <RepositionThemeTransition />
                            <AddDeleteThemeTransition />
                            <ContentThemeTransition />
                            <EntranceThemeTransition FromVerticalOffset="1000" IsStaggeringEnabled="True" />
                            <ReorderThemeTransition />
                        </TransitionCollection>
                    </ListView.ItemContainerTransitions>
                </ListView>
            </Grid>

            <Grid Margin="0,45,0,0">
                <Grid
                    x:Name="SaveButtonGrid"
                    Width="100"
                    Height="80"
                    Margin="0,0,0,0"
                    Padding="0,0,0,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    CornerRadius="8,0,0,0">
                    <Button
                        x:Name="SaveButton"
                        Width="100"
                        Height="80"
                        classes:RippleHelper.IsFillEnable="True"
                        classes:RippleHelper.RippleColor="Green"
                        classes:RippleHelper.RippleDuration="0:0:0.5"
                        classes:RippleHelper.RippleHelperState="Pressed"
                        Background="Transparent"
                        Click="SaveButton_Click"
                        CornerRadius="8,0,0,0"
                        FontFamily="{StaticResource HarmonyOSSans}">
                        <Grid>
                            <StackPanel x:Name="SaveStackPanel" Orientation="Vertical">
                                <SymbolIcon
                                    HorizontalAlignment="Center"
                                    Foreground="#FF009AFF"
                                    Symbol="Save" />
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    FontFamily="{StaticResource HarmonyOSSans}"
                                    FontSize="16"
                                    Foreground="#FF009AFF"
                                    Text="保存更改" />
                            </StackPanel>
                            <StackPanel
                                x:Name="SavingStackPanel"
                                Orientation="Vertical"
                                Visibility="Collapsed">
                                <muxc:ProgressRing IsActive="True" />
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    FontFamily="{StaticResource HarmonyOSSans}"
                                    FontSize="16"
                                    Foreground="#FF009AFF"
                                    Text="正在保存" />
                            </StackPanel>
                            <StackPanel
                                x:Name="SavedStackPanel"
                                Orientation="Vertical"
                                Visibility="Collapsed">
                                <SymbolIcon
                                    HorizontalAlignment="Center"
                                    Foreground="Green"
                                    Symbol="Accept" />
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    FontFamily="{StaticResource HarmonyOSSans}"
                                    FontSize="16"
                                    Foreground="Green"
                                    Text="保存成功" />
                            </StackPanel>
                        </Grid>
                    </Button>
                    <ProgressBar
                        x:Name="SaveProcessBar"
                        Width="Auto"
                        Height="5"
                        VerticalAlignment="Bottom" />
                </Grid>
                <Grid Margin="100,0,0,0">
                    <StackPanel
                        x:Name="EditStackPanel"
                        Height="80"
                        VerticalAlignment="Top"
                        animations:Implicit.HideAnimations="{StaticResource HideTransitions}"
                        animations:Implicit.ShowAnimations="{StaticResource ShowTransitions}"
                        Orientation="Horizontal"
                        Style="{StaticResource PanelStyle}">
                        <Button
                            x:Name="AddItemButton"
                            Grid.Column="2"
                            Width="90"
                            Height="60"
                            VerticalAlignment="Center"
                            FontFamily="{StaticResource HarmonyOSSans}">
                            <StackPanel>
                                <FontIcon FontFamily="{StaticResource SegoeFluentIcons}" Glyph="&#xE8FA;" />
                                <TextBlock FontFamily="{StaticResource HarmonyOSSans}" Text="添加学生" />
                            </StackPanel>
                            <Button.Flyout>
                                <Flyout>
                                    <StackPanel>
                                        <controls:Segmented
                                            x:Name="AddModeSegmented"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Top"
                                            SelectionChanged="AddModeSegmented_SelectionChanged">
                                            <controls:SegmentedItem Content="逐个添加" FontFamily="{StaticResource HarmonyOSSans}" />
                                            <controls:SegmentedItem Content="批量添加" FontFamily="{StaticResource HarmonyOSSans}" />
                                        </controls:Segmented>
                                        <Grid x:Name="SingleAddGrid" Margin="0,15,0,0">
                                            <TextBlock FontFamily="{StaticResource HarmonyOSSans}" Text="姓名:" />
                                            <TextBox
                                                x:Name="NameTextBox"
                                                Height="30"
                                                Margin="0,15,0,0" />
                                        </Grid>
                                        <Grid x:Name="BatchAddGrid" Margin="0,15,0,0">
                                            <Grid>
                                                <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                                                    <Button
                                                        x:Name="OpenFileButton"
                                                        VerticalAlignment="Top"
                                                        Click="OpenFileButton_Click">
                                                        <Grid>
                                                            <SymbolIcon HorizontalAlignment="Left" Symbol="Read" />
                                                            <TextBlock
                                                                Margin="25,0,0,0"
                                                                HorizontalAlignment="Left"
                                                                FontFamily="{StaticResource HarmonyOSSans}"
                                                                Text="打开文件" />
                                                        </Grid>
                                                    </Button>
                                                    <Button VerticalAlignment="Top" Click="SaveFileButton_Click">
                                                        <Grid>
                                                            <SymbolIcon HorizontalAlignment="Left" Symbol="Save" />
                                                            <TextBlock
                                                                Margin="25,0,0,0"
                                                                HorizontalAlignment="Left"
                                                                FontFamily="{StaticResource HarmonyOSSans}"
                                                                Text="保存副本" />
                                                        </Grid>
                                                    </Button>
                                                </StackPanel>

                                                <ScrollViewer
                                                    MaxWidth="200"
                                                    MaxHeight="400"
                                                    Margin="0,50,0,0"
                                                    VerticalScrollBarVisibility="Auto"
                                                    VerticalScrollMode="Enabled">

                                                    <Grid
                                                        x:Name="NamesGrid"
                                                        MinWidth="120"
                                                        MaxWidth="300"
                                                        CornerRadius="0,0,0,0">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition Width="*" />
                                                        </Grid.ColumnDefinitions>

                                                        <Border
                                                            x:Name="lineNumberBorder"
                                                            Grid.Column="0"
                                                            CornerRadius="8,0,0,8">
                                                            <TextBlock
                                                                x:Name="lineNumberTextBlock"
                                                                Margin="0,5"
                                                                VerticalAlignment="Top"
                                                                FontFamily="{StaticResource HarmonyOSSans}"
                                                                FontSize="16"
                                                                Foreground="{ThemeResource LineNumberForeground}"
                                                                IsTextSelectionEnabled="False"
                                                                TextAlignment="Right" />
                                                        </Border>

                                                        <TextBox
                                                            x:Name="Editor"
                                                            Grid.Column="1"
                                                            x:FieldModifier="public"
                                                            AcceptsReturn="True"
                                                            CornerRadius="0,0,0,0"
                                                            FontFamily="{StaticResource HarmonyOSSans}"
                                                            FontSize="16"
                                                            Loaded="Editor_Loaded"
                                                            Style="{StaticResource EditorStyle}"
                                                            TextChanged="Editor_TextChanged" />

                                                    </Grid>
                                                </ScrollViewer>
                                            </Grid>
                                        </Grid>

                                        <Button
                                            Margin="0,10,0,0"
                                            HorizontalAlignment="Center"
                                            Click="AddItemButton_Click">
                                            <StackPanel Orientation="Horizontal">
                                                <SymbolIcon Symbol="Accept" />
                                                <TextBlock
                                                    Margin="5,0,0,0"
                                                    FontFamily="{StaticResource HarmonyOSSans}"
                                                    Text="确定" />
                                            </StackPanel>
                                        </Button>
                                    </StackPanel>
                                </Flyout>
                            </Button.Flyout>
                        </Button>
                        <Button
                            x:Name="DeleteItemButton"
                            Grid.Column="2"
                            Width="90"
                            Height="60"
                            Click="DeleteItemButton_Click"
                            FontFamily="{StaticResource HarmonyOSSans}">
                            <StackPanel>
                                <FontIcon
                                    FontFamily="{StaticResource SegoeFluentIcons}"
                                    Foreground="#FFFC5665"
                                    Glyph="&#xE74D;" />
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    FontFamily="{StaticResource HarmonyOSSans}"
                                    Foreground="#FFFC5665"
                                    Text="删除此项" />
                            </StackPanel>
                        </Button>

                        <Button
                            x:Name="FolderPickerButton"
                            Width="100"
                            Height="60"
                            FontFamily="{StaticResource HarmonyOSSans}">
                            <StackPanel>
                                <FontIcon FontFamily="{StaticResource SegoeFluentIcons}" Glyph="&#xE838;" />
                                <TextBlock FontFamily="{StaticResource HarmonyOSSans}" Text="打开文件夹" />
                            </StackPanel>
                            <Button.Flyout>
                                <Flyout>
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock FontFamily="{StaticResource HarmonyOSSans}" Text="选择一个文件夹，将文件夹下所有图片从当前被选择的项开始填充" />
                                        <Button
                                            Click="FolderPickerButton_Click"
                                            Content="确定"
                                            FontFamily="{StaticResource HarmonyOSSans}" />
                                    </StackPanel>
                                </Flyout>
                            </Button.Flyout>
                        </Button>
                        <TextBlock
                            x:Name="CurrentSelectionTextBlock"
                            Height="30"
                            FontFamily="{StaticResource HarmonyOSSans}"
                            Text="当前选择项:无" />
                        <TextBlock
                            Width="1270"
                            Height="30"
                            FontFamily="{StaticResource HarmonyOSSans}"
                            Text="Tips:可以直接拖动一个或多个图片从当前被选择项开始填充" />
                    </StackPanel>
                    <StackPanel
                        x:Name="FileStackPanel"
                        Height="80"
                        VerticalAlignment="Top"
                        animations:Implicit.HideAnimations="{StaticResource HideTransitions}"
                        animations:Implicit.ShowAnimations="{StaticResource ShowTransitions}"
                        Style="{StaticResource PanelStyle}">
                        <Button
                            x:Name="AddFileButton"
                            Grid.Column="2"
                            Width="95"
                            Height="60"
                            VerticalAlignment="Center">
                            <Button.Flyout>
                                <Flyout>
                                    <StackPanel>
                                        <TextBlock FontFamily="{StaticResource HarmonyOSSans}" Text="警告：此操作将清空学生列表" />
                                        <Button
                                            Margin="0,5,0,0"
                                            HorizontalAlignment="Center"
                                            Click="AddFileButton_Click"
                                            Content="确定"
                                            FontFamily="{StaticResource HarmonyOSSans}"
                                            Style="{StaticResource AccentButtonStyle}" />
                                    </StackPanel>
                                </Flyout>
                            </Button.Flyout>
                            <StackPanel>
                                <FontIcon FontFamily="{StaticResource SegoeFluentIcons}" Glyph="&#xE82E;" />
                                <TextBlock FontFamily="{StaticResource HarmonyOSSans}" Text="新建数据库" />
                            </StackPanel>
                        </Button>
                        <Button
                            x:Name="OpenDataFileButton"
                            Grid.Column="2"
                            Width="95"
                            Height="60"
                            VerticalAlignment="Center"
                            Click="OpenDataFileButton_Click">
                            <StackPanel>
                                <FontIcon FontFamily="{StaticResource SegoeFluentIcons}" Glyph="&#xE82D;" />
                                <TextBlock FontFamily="{StaticResource HarmonyOSSans}" Text="打开数据库" />
                            </StackPanel>
                        </Button>
                        <Button
                            x:Name="SaveDataFileButton"
                            Grid.Column="2"
                            Width="95"
                            Height="60"
                            VerticalAlignment="Center"
                            Click="SaveDataFileButton_Click">
                            <StackPanel>
                                <FontIcon FontFamily="{StaticResource SegoeFluentIcons}" Glyph="&#xE792;" />
                                <TextBlock FontFamily="{StaticResource HarmonyOSSans}" Text="另存数据库" />
                            </StackPanel>
                        </Button>
                        <Button
                            x:Name="OpenLocalFolderButton"
                            Grid.Column="2"
                            Width="95"
                            Height="60"
                            VerticalAlignment="Center"
                            Click="OpenLocalFolderButton_Click">
                            <StackPanel>
                                <FontIcon FontFamily="{StaticResource SegoeFluentIcons}" Glyph="&#xEC25;" />
                                <TextBlock FontFamily="{StaticResource HarmonyOSSans}" Text="本地文件夹" />
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Grid>
            </Grid>
        </Grid>


    </Grid>
</Page>
